'use strict';

var _commander = require('commander');

var _commander2 = _interopRequireDefault(_commander);

var _package = require('../package.json');

var _package2 = _interopRequireDefault(_package);

var _index = require('./index.js');

var _index2 = _interopRequireDefault(_index);

var _fs = require('fs');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var extendedHelp = '\n\n' + _package2.default.description + '\n\nExample:\n$ cat MyContract.sol | solgraph > MyContract.dot';

var program = _commander2.default.version(_package2.default.version).arguments('<file>').usage(extendedHelp).parse(process.argv);

var input = program.args[0]
// filename from command line arguments
? new Promise(function (resolve, reject) {
  (0, _fs.readFile)(program.args[0], 'utf-8', function (err, data) {
    if (err) {
      return reject(err);
    }
    resolve(data);
  });
})
// stdin
: require('get-stdin-promise');

input.then(function (source) {
  console.log((0, _index2.default)(source));
});